steps:


- task: NodeTool@0
  displayName: 'Use Node 12.x'
  inputs:
    versionSpec: 12.x


- task: Npm@1
  displayName: 'npm cli'
  inputs:
    command: custom
    workingDir: 'SDR-WebApp'
    verbose: false
    customCommand: 'install -g @angular/cli@13.0.3'



- task: Npm@1
  displayName: 'npm install'
  inputs:
    command: custom
    workingDir: 'SDR-WebApp'
    verbose: false
    customCommand: install



- task: Npm@1
  displayName: 'npm update'
  inputs:
    command: custom
    workingDir: 'SDR-WebApp'
    verbose: false
    customCommand: update



- script: |
   ng build --configuration=dev2
  workingDirectory: 'SDR-WebApp'
  displayName: 'Build dev2'


- task: CopyFiles@2
  displayName: 'Copy Files to: $(Build.ArtifactStagingDirectory)/dev2'
  inputs:
    SourceFolder: '$(System.DefaultWorkingDirectory)'
    Contents: '**/SDR-WebApp/dist/**'
    TargetFolder: '$(Build.ArtifactStagingDirectory)/dev2'



- task: PublishBuildArtifacts@1
  displayName: 'Publish Artifact: drop_dev2'
  inputs:
    PathtoPublish: '$(Build.ArtifactStagingDirectory)/dev2'
    ArtifactName: 'drop_dev2'


- task: mspremier.PostBuildCleanup.PostBuildCleanup-task.PostBuildCleanup@3
  displayName: 'Clean Agent Directories'


- script: |
   ng build --configuration=qa
  workingDirectory: 'SDR-WebApp'
  displayName: 'Build qa'


- task: CopyFiles@2
  displayName: 'Copy Files to: $(Build.ArtifactStagingDirectory) copy'
  inputs:
    SourceFolder: '$(System.DefaultWorkingDirectory)'
    Contents: '**/SDR-WebApp/dist/**'
    TargetFolder: '$(Build.ArtifactStagingDirectory)/qa'


- task: PublishBuildArtifacts@1
  displayName: 'Publish Artifact: drop_qa'
  inputs:
    PathtoPublish: '$(Build.ArtifactStagingDirectory)/qa'
    ArtifactName: 'drop_qa'

